var mysql = require('mysql');
var connection = mysql.createConnection({
	host:		'localhost',
	user:		'root',
	password: 	'3306',
	database:	'blog'
});

connection.connect();

exports.saveData = function(req)
{
	
	var article = {
		"title"			:	req.body.articleTittle,
		"authorName"	:	req.body.articleAuthor,
		"publishTime"	:	new Date(),
		"content"		:	req.body.articleBody
	}
	console.log("收到的文章数据是:\n"+JSON.stringify(article));
	var sql = 'insert into article (tittle,authorName,publishTime,content) values ('+
	'"'+req.body.articleTittle +'",'+ '"lyle",'+'NOW(),'+'"'+req.body.articleBody+'");'
	
	console.log("执行sql:\n"+sql);
	connection.query(sql,function(err,results){
		if(err)
			console.log("数据库插入错误\n"+err);
		else{
			console.log(JSON.stringify(results));
		}
	});
}

